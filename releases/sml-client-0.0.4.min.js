!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SML=t():e.SML=t()}(self,(function(){return(()=>{var e={43:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(765);Object.defineProperty(t,"ReliableTxtDocument",{enumerable:!0,get:function(){return s.default}});var r=n(572);Object.defineProperty(t,"ReliableTxtDocumentServer",{enumerable:!0,get:function(){return r.default}});var i=n(102);Object.defineProperty(t,"ReliableTxtException",{enumerable:!0,get:function(){return i.default}});var a=n(927);Object.defineProperty(t,"ReliableTxtEncoding",{enumerable:!0,get:function(){return a.default}});var o=n(568);Object.defineProperty(t,"ReliableTxtFile",{enumerable:!0,get:function(){return o.default}});var u=n(355);Object.defineProperty(t,"SmlAttribute",{enumerable:!0,get:function(){return u.default}});var l=n(771);Object.defineProperty(t,"SmlDocument",{enumerable:!0,get:function(){return l.default}});var d=n(588);Object.defineProperty(t,"SmlDocumentServer",{enumerable:!0,get:function(){return d.default}});var c=n(597);Object.defineProperty(t,"SmlElement",{enumerable:!0,get:function(){return c.default}});var f=n(555);Object.defineProperty(t,"SmlNamedNode",{enumerable:!0,get:function(){return f.default}});var h=n(899);Object.defineProperty(t,"SmlNode",{enumerable:!0,get:function(){return h.default}});var p=n(41);Object.defineProperty(t,"SmlEmptyNode",{enumerable:!0,get:function(){return p.default}});var m=n(264);Object.defineProperty(t,"SmlParserException",{enumerable:!0,get:function(){return m.default}});var g=n(897);Object.defineProperty(t,"WsvChar",{enumerable:!0,get:function(){return g.default}});var b=n(153);Object.defineProperty(t,"WsvLine",{enumerable:!0,get:function(){return b.default}});var v=n(499);Object.defineProperty(t,"WsvDocument",{enumerable:!0,get:function(){return v.default}});var _=n(996);Object.defineProperty(t,"WsvDocumentServer",{enumerable:!0,get:function(){return _.default}});var y=n(202);Object.defineProperty(t,"WsvParserException",{enumerable:!0,get:function(){return y.default}});var E=n(223);Object.defineProperty(t,"StringUtil",{enumerable:!0,get:function(){return E.default}})},765:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(223));class i{constructor(...e){return this.text="",this.text=e.join("\n"),this}static join(e){return new i(...e).toString()}setText(e){null!==e&&(this.text=e)}setTextByCodePoints(e){null!==e&&(this.text=r.default.codePointsToString(e))}getText(){return this.text}getTextAsCodePoints(){return r.default.stringToCodePoints(this.text)}setLines(...e){this.text=e.join("\n")}getLines(){return this.text.split("\n")}toString(){return this.text}}t.default=i},572:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(765)),i=s(n(927)),a=s(n(568));class o extends r.default{constructor(...e){return super(...e),this.encoding=i.default.UTF8,this}static load(e){const t=(new a.default).load(e),n=new o(t.getContent());return n.setEncoding(t.getEncoding()),n}setEncoding(e){return this.encoding=e,this}getEncoding(){return this.encoding}save(e){return new a.default(this.encoding).save(e,this.text),this}}t.default=o},927:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.UTF8="utf8",e.UTF16_REVERSED="utf16le"}(n||(n={})),t.default=n},102:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,n)}}t.default=n},568:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(993),i=s(n(927)),a=s(n(102));class o{constructor(e){return this.fileContent="",this.encoding=i.default.UTF8,this.setEncoding(e),this}static getEncodingFromBuffer(e){if(e.length<2)return null;const t=e.readInt8(0),n=e.readInt8(1);return-1===t&&-2===n?i.default.UTF16_REVERSED:-17===t&&-69===n&&e.length>=3&&-65===e.readInt8(2)?i.default.UTF8:null}save(e,t,n){this.setEncoding(n);try{r.writeFileSync(e,"\ufeff"+t,this.encoding)}catch(e){console.error(e)}return this}load(e){try{const t=r.readFileSync(e,Object.assign({flag:"r"})),n=o.getEncodingFromBuffer(t);if(null===n)throw new a.default("Document does not have a ReliableTXT preamble");this.setEncoding(n);const s=r.readFileSync(e,Object.assign({encoding:this.encoding,flag:"r"})).toString();return this.fileContent=s.slice(1),this}catch(e){throw Error(e.message)}}getEncoding(){return this.encoding}getContent(){return this.fileContent}setEncoding(e){return e&&(this.encoding=e),this}}t.default=o},355:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(555)),i=s(n(650));class a extends r.default{constructor(e,t){super(e),this.values=[],this.setValues(...t.map(String))}setValues(...e){if(null===e||0===e.length)throw new Error("Values must contain at least one value");this.values=e.map(String)}getValues(e){return e?this.values.slice(e):this.values}getNumberValues(e){return e?this.values.slice(e).map(Number):this.values.map(Number)}getString(e){return e?this.values[e]:this.values[0]}setString(e){this.values=[e]}toString(){return i.default.serializeAttribute(this)}toWsvLines(e,t,n,s){i.default.serializeAttributeInternal(this,e,t,n)}}t.default=a},771:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(211)),i=s(n(650)),a=s(n(223));class o{constructor(e){this.emptyNodesBefore=[],this.emptyNodesAfter=[],this.endKeyword="End",this.defaultIndentation=null,e&&(this.root=e)}static parse(e){const t=new o;return r.default.parseDocument(e,t)}setEndKeyword(e){this.endKeyword=e}getEndKeyword(){return this.endKeyword}setDefaultIndentation(e){if(!a.default.isWhitespaceOrEmpty(e))throw Error("Invalid indentation");this.defaultIndentation=e}getDefaultIndentation(){return this.defaultIndentation}getRoot(){return this.root}setRoot(e){this.root=e}toString(){return i.default.serializeDocument(this)}}t.default=o},588:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(572)),i=s(n(927)),a=s(n(771)),o=s(n(211));class u extends a.default{constructor(e){return super(e),this.encoding=i.default.UTF8,this}static parse(e){const t=new u;return o.default.parseDocument(e,t)}static load(e){const t=r.default.load(e),n=u.parse(t.getText());return n.setEncoding(t.getEncoding()),n}setEncoding(e){return this.encoding=e,this}getEncoding(){return this.encoding}save(e){return new r.default(this.toString()).setEncoding(this.getEncoding()).save(e),this}}t.default=u},597:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(355)),i=s(n(41)),a=s(n(555)),o=s(n(650)),u=s(n(153));class l extends a.default{constructor(e){super(e),this.nodes=[]}setEndWhitespaces(...e){u.default.validateWhitespaces(e),this.endWhitespaces=e}getEndWhitespaces(){return[...this.endWhitespaces]}setEndComment(e){u.default.validateComment(e),this.endComment=e}getEndComment(){return this.endComment}setEndWhitespacesAndComment(e,t){this.endWhitespaces=e,this.endComment=t}add(e){return this.nodes.push(e),e}addAttribute(e,t){const n=t.map(String),s=new r.default(e,n);return this.add(s),s}addElement(e){const t=new l(e);return this.add(t),t}addEmptyNode(){const e=new i.default;return this.add(e),e}hasAttribute(e){return this.nodes.filter((e=>e instanceof r.default)).map((e=>e)).filter((t=>t.hasName(e))).length>0}getAttribute(e){const t=this.nodes.filter((e=>e instanceof r.default)).map((e=>e)).filter((t=>t.hasName(e))).shift();if(!t)throw Error(`No attribute with name '${e}'`);return t}getAttributes(e){let t=[];return t=e?this.nodes.filter((e=>e instanceof r.default)).map((e=>e)).filter((t=>t.hasName(e))):this.nodes.filter((e=>e instanceof r.default)).map((e=>e)),t}hasElement(e){return this.nodes.filter((e=>e instanceof l)).map((e=>e)).filter((t=>t.hasName(e))).length>0}getElement(e){const t=this.nodes.filter((e=>e instanceof l)).map((e=>e)).filter((t=>t.hasName(e))).shift();if(!t)throw Error(`No element with name '${e}'`);return t}getElements(e){let t=[];return t=e?this.nodes.filter((e=>e instanceof l)).map((e=>e)).filter((t=>t.hasName(e))):this.nodes.filter((e=>e instanceof l)).map((e=>e)),t}getBoolean(e){return Boolean(this.getAttribute(e).getString())}getNumber(e){return Number(this.getAttribute(e).getString())}getString(e){return this.getAttribute(e).getString()}getStringValues(e){return this.getAttribute(e).getValues()}getNumberValues(e){return this.getAttribute(e).getNumberValues()}toString(){return o.default.serializeElement(this)}toWsvLines(e,t,n,s){o.default.serializeElementInternal(this,e,t,n,s)}}t.default=l},41:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(899)),i=s(n(650));class a extends r.default{constructor(){super()}toString(){return i.default.serializeEmptyNode(this)}toWsvLines(e,t,n,s){i.default.serializeEmptyNodeInternal(this,e,t,n)}}t.default=a},555:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(899)),i=s(n(223));class a extends r.default{constructor(e){super(),this.name=e}hasName(e){return i.default.equalsIgnoreCase(this.name,e)}}t.default=a},899:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(153));t.default=class{constructor(){this.whitespaces=null,this.comment=null}setWhitespaces(...e){r.default.validateWhitespaces(e),this.whitespaces=e}getWhitespaces(){return[...this.whitespaces]}setComment(e){r.default.validateComment(e),this.comment=e}getComment(){return this.comment}setWhitespacesAndComment(e,t){this.whitespaces=e,this.comment=t}toWsvLines(e,t,n,s){}}},211:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(355)),i=s(n(597)),a=s(n(41)),o=s(n(264)),u=s(n(223)),l=s(n(499)),d=s(n(769));class c{static parseDocument(e,t){const n=l.default.parse(e),s=c.getEndKeyword(n),r=new d.default(n,s);t.setEndKeyword(s);const i=c.readRootElement(r,t.emptyNodesBefore);return t.setRoot(i),c.readElementContent(r,i),c.readEmptyNodes(t.emptyNodesAfter,r),t}static readRootElement(e,t){if(c.readEmptyNodes(t,e),!e.hasLine())throw new o.default("Root element expected");const n=e.getLine();if(!n.hasValues()||1!==n.getValues().length||u.default.equalsIgnoreCase(n.getValues()[0],e.getEndKeyword()))throw new o.default("Invalid root element start");const s=n.getValues()[0],r=new i.default(s);return r.setWhitespacesAndComment(n.getWhitespaces(),n.getComment()),r}static readNode(e,t){let n;const s=e.getLine();if(s.hasValues()){const a=s.getValues()[0];if(u.default.equalsIgnoreCase(a,e.getEndKeyword())){if(s.getValues().length>1)throw new o.default("Attribute with end keyword name is not allowed");return t.setEndWhitespacesAndComment(s.getWhitespaces(),s.getComment()),null}if(1===s.getValues().length){const t=new i.default(a);t.setWhitespacesAndComment(s.getWhitespaces(),s.getComment()),this.readElementContent(e,t),n=t}else{const e=s.getValues().slice(1),t=new r.default(a,e);t.setWhitespacesAndComment(s.getWhitespaces(),s.getComment()),n=t}}else{const e=new a.default;e.setWhitespacesAndComment(s.getWhitespaces(),s.getComment()),n=e}return n}static readElementContent(e,t){for(;;){if(!e.hasLine())throw new o.default("Element not closed");const n=c.readNode(e,t);if(null==n)break;t.add(n)}}static readEmptyNodes(e,t){for(;t.isEmptyLine();){const n=c.readEmptyNode(t);e.push(n)}}static readEmptyNode(e){const t=e.getLine(),n=new a.default;return n.setWhitespacesAndComment(t.getWhitespaces(),t.getComment()),n}static getEndKeyword(e){for(let t=e.getLines().length-1;t>=0;t--){const n=e.getLine(t).getValues();if(null!==n){if(1===n.length)return n[0];if(n.length>1)break}}throw new o.default("End keyword could not be detected")}}t.default=c},264:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e,...t){super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,n),this.name="SmlParserException",this.message=`${e}`}}t.default=n},650:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(499));class i{static serializeDocument(e){const t=new r.default;return i.serialzeEmptyNodes(e.emptyNodesBefore,t),e.getRoot().toWsvLines(t,0,e.getDefaultIndentation(),e.getEndKeyword()),i.serialzeEmptyNodes(e.emptyNodesAfter,t),t.toString()}static serializeElement(e){const t=new r.default;return e.toWsvLines(t,0,null,"End"),t.toString()}static serializeAttribute(e){const t=new r.default;return e.toWsvLines(t,0,null,null),t.toString()}static serializeAttributeInternal(e,t,n,s){const r=i.getWhitespaces(e.getWhitespaces(),n,s),a=[e.name,...e.getValues()];t.addWsvLineBySet(a,r,e.getComment())}static serializeEmptyNode(e){const t=new r.default;return e.toWsvLines(t,0,null,null),t.toString()}static serializeEmptyNodeInternal(e,t,n,s){const r=i.getWhitespaces(e.getWhitespaces(),n,s);t.addWsvLineBySet(null,r,e.getComment())}static serializeElementInternal(e,t,n,s,r){const a=n+1,o=i.getWhitespaces(e.getWhitespaces(),n,s);t.addWsvLineBySet([e.name],o,e.getComment());for(const n of e.nodes)n.toWsvLines(t,a,s,r);const u=i.getWhitespaces(e.getEndWhitespaces(),n,s);t.addWsvLineBySet([r],u,e.getEndComment())}static getWhitespaces(e,t,n){return null!=e&&e.length>0?e:null==n?["\t".repeat(t)]:[n.repeat(t)]}static serialzeEmptyNodes(e,t){for(const n of e)n.toWsvLines(t,0,null,null)}}t.default=i},828:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(223));t.default=class{constructor(){this.codePoints=[]}clear(){this.codePoints=[]}toString(){return r.default.codePointsToString(this.codePoints)}appendCodePoint(e){this.codePoints.push(e)}appendString(e){const t=r.default.stringToCodePoints(e);this.codePoints=[...this.codePoints,...t]}getLength(){return this.codePoints.length}}},223:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(897));class i{static getSubstr(e,t,n){return e.slice(t,t+n).map((e=>String.fromCodePoint(e))).join("")}static stringToCodePoints(e){const t=[];for(const n of e)t.push(n.codePointAt(0));return t}static codePointsToString(e){return e.map((e=>String.fromCodePoint(e))).join("")}static isWhitespaceOrEmpty(e){const t=i.stringToCodePoints(e);for(const e of t)if(!r.default.isWhitespace(e))return!1;return!0}static equalsIgnoreCase(e,t){return"string"==typeof e&&"string"==typeof t?0===e.localeCompare(t,void 0,{sensitivity:"accent"}):e===t}}t.default=i,i.doubleQuote='"'.codePointAt(0),i.lineBreak="\n".codePointAt(0),i.slash="/".codePointAt(0),i.hash="#".codePointAt(0),i.minus="-".codePointAt(0)},897:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static isWhitespace(e){return e>=9&&e<=13||32===e||133===e||160===e||5760===e||e>=8192&&e<=8202||e>=8232&&e<=8233||8239===e||8287===e||12288===e}}},499:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(153)),i=s(n(346)),a=s(n(95));class o{constructor(){this.lines=[]}static parse(e){const t=new o;return i.default.parseDocument(e,t)}addWsvLines(...e){for(const t of e)this.lines.push(t);return this}addWsvLineByValues(...e){const t=new r.default;for(const n of e)t.addValue(n);return this.addWsvLines(t)}addWsvLineBySet(e,t,n){return this.addWsvLines((new r.default).set(e,t,n)),this}getLines(){return this.lines}getLine(e){return this.lines[e]}toArray(){const e=[];for(let t=0;t<this.lines.length;t++)e[t]=this.lines[t].getValues();return e}toString(){return a.default.serializeDocument(this)}}t.default=o},769:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(427));class i extends r.default{constructor(e,t){if(super(),this.index=0,null===t)throw Error("Endkeyword cannot be null");this.wsvDocument=e,this.endKeyword=t}getEndKeyword(){return this.endKeyword}hasLine(){return this.index<this.wsvDocument.getLines().length}isEmptyLine(){return this.hasLine()&&!this.wsvDocument.getLine(this.index).hasValues()}getLine(){const e=this.wsvDocument.getLine(this.index);return this.index++,e}toString(){let e="("+this.index+"): ";return this.hasLine()&&(e+=this.wsvDocument.getLine(this.index).toString()),e}}t.default=i},996:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(572)),i=s(n(927)),a=s(n(499)),o=s(n(346));class u extends a.default{constructor(){return super(),this.encoding=i.default.UTF8,this}static parse(e){const t=new u;return o.default.parseDocument(e,t)}static load(e){const t=r.default.load(e),n=u.parse(t.getText());return n.setEncoding(t.getEncoding()),n}setEncoding(e){return this.encoding=e,this}getEncoding(){return this.encoding}save(e){return new r.default(this.toString()).setEncoding(this.getEncoding()).save(e),this}}t.default=u},153:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(828)),i=s(n(223)),a=s(n(346)),o=s(n(95));class u{constructor(...e){this.values=[],this.comment=null;for(const t of e)this.addValue(t);return this.whitespaces=null,this.comment=null,this}static parse(e){return a.default.parseLine(e)}static validateWhitespaces(e){if(null!==e)for(const t of e)if(null!==t&&!i.default.isWhitespaceOrEmpty(t))throw new Error("Whitespace value contains non whitespace character")}static validateComment(e){if(null!==e&&e.indexOf("\n"))throw new Error("Line break in comment is not allowed")}addValue(e){null===this.values&&(this.values=[]),this.values.push(e)}getValues(){return this.values}setValues(...e){this.values=e}hasValues(){return null!==this.values&&this.values.length>0}setWhitespaces(e){u.validateWhitespaces(e),this.whitespaces=e}getWhitespaces(){return null===this.whitespaces?null:[...this.whitespaces]}setComment(e){u.validateComment(e),this.comment=e}getComment(){return this.comment}set(e,t,n){return this.values=e,this.whitespaces=t,this.comment=n,this}toString(){const e=new r.default;return o.default.serializeLine(e,this),e.toString()}}t.default=u},427:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){}hasLine(){return!1}isEmptyLine(){return!1}getLine(){return null}getEndKeyword(){return null}}},346:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(223)),i=s(n(153)),a=s(n(658)),o=s(n(202));class u{static parseLine(e){const t=new a.default(e),n=u.parseLineWithIterator(t);if(t.tryReadChar(r.default.lineBreak))throw new o.default(t,"Multiple WSV lines not allowed");if(!t.isEndOfText())throw new o.default(t,"WSV line not parsed completely");return n}static parseDocument(e,t){const n=new a.default(e);for(;;){const e=u.parseLineWithIterator(n);if(t.addWsvLines(e),n.isEndOfText())break;if(!n.tryReadChar(r.default.lineBreak))throw new o.default(n,"Invalid WSV document")}if(!n.isEndOfText())throw new o.default(n,"WSV document not parsed completely");return t}static parseLineWithIterator(e){const t=[],n=[];let s=e.readWhitespaceOrNull();for(n.push(s);!e.isChar(r.default.lineBreak)&&!e.isEndOfText();){let i="";if(e.isChar(r.default.hash))break;if(e.tryReadChar(r.default.doubleQuote)?i=e.readString():(i=e.readValue(),"-"===i&&(i=null)),t.push(i),s=e.readWhitespaceOrNull(),null==s)break;n.push(s)}let a=null;return e.tryReadChar(r.default.hash)&&(a=e.readCommentText(),null==s&&n.push(null)),(new i.default).set(t,n,a)}}t.default=u},658:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(828)),i=s(n(223)),a=s(n(897)),o=s(n(202));t.default=class{constructor(e){this.sb=new r.default,this.chars=[],this.index=0,this.chars=i.default.stringToCodePoints(e)}getText(){return i.default.codePointsToString(this.chars)}getLineInfoString(){const e=this.getLineInfo();return`(${e[1]+1}, ${e[2]+1})`}getLineInfo(){let e=0,t=0;for(let n=0;n<this.index;n++)this.chars[n]===i.default.lineBreak?(e++,t=0):t++;return[this.index,e,t]}isEndOfText(){return this.index>=this.chars.length}isChar(e){return!this.isEndOfText()&&this.chars[this.index]===e}tryReadChar(e){return!!this.isChar(e)&&(this.index++,!0)}readCommentText(){const e=this.index;for(;!this.isEndOfText()&&this.chars[this.index]!==i.default.lineBreak;)this.index++;return i.default.getSubstr(this.chars,e,this.index-e)}readWhitespaceOrNull(){const e=this.index;for(;!this.isEndOfText();){const e=this.chars[this.index];if(e===i.default.lineBreak)break;if(!a.default.isWhitespace(e))break;this.index++}return this.index===e?null:i.default.getSubstr(this.chars,e,this.index-e)}readString(){for(this.sb.clear();;){if(this.isEndOfText())throw new o.default(this,"String not closed");const e=this.chars[this.index];if(e===i.default.lineBreak)throw new o.default(this,"String not closed in starting line");if(e===i.default.doubleQuote)if(this.index++,this.tryReadChar(i.default.doubleQuote))this.sb.appendCodePoint(i.default.doubleQuote);else{if(!this.tryReadChar(i.default.slash))break;if(!this.tryReadChar(i.default.doubleQuote))throw new o.default(this,"String expected after linebreak slash");this.sb.appendCodePoint(i.default.lineBreak)}else this.sb.appendCodePoint(e),this.index++}return this.sb.toString()}readValue(){const e=this.index;for(;!this.isEndOfText();){const e=this.chars[this.index];if(a.default.isWhitespace(e)||e===i.default.hash)break;if(e===i.default.doubleQuote)throw new o.default(this,"String starting in value");this.index++}if(this.index===e)throw new o.default(this,"Invalid value");return i.default.getSubstr(this.chars,e,this.index-e)}}},202:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e,t){super(`${t} ${e.getLineInfoString()}`),Error.captureStackTrace&&Error.captureStackTrace(this,n);const s=e.getLineInfo();this.index=s[0],this.lineIndex=s[1],this.linePosition=s[2],this.text=e.getText()}}t.default=n},95:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(828)),i=s(n(223)),a=s(n(897));class o{static containsSpecialChars(e){const t=i.default.stringToCodePoints(e);for(const e of t)if(e===i.default.lineBreak||a.default.isWhitespace(e)||e===i.default.doubleQuote||e===i.default.hash)return!0;return!1}static serializeLine(e,t){null!==t.getWhitespaces()&&t.getWhitespaces().length>0?o.serializeValuesWithWhitespace(e,t):o.serializeValuesWithoutWhitespace(e,t),null!==t.getComment()&&(e.appendCodePoint(i.default.hash),e.appendString(t.getComment()))}static serializeDocument(e){const t=new r.default;let n=!0;for(const s of e.getLines())n?n=!1:t.appendCodePoint(i.default.lineBreak),o.serializeLine(t,s);return t.toString()}static serializeValue(e,t){if(null===t)e.appendString("-");else if(""===t)e.appendString('""');else if("-"===t)e.appendString('"-"');else if(o.containsSpecialChars(t)){e.appendCodePoint(i.default.hash);const n=i.default.stringToCodePoints(t);for(const t of n)t===i.default.lineBreak?e.appendString('"/"'):t===i.default.hash?e.appendString('""'):e.appendCodePoint(t);e.appendCodePoint(i.default.hash)}else e.appendString(t)}static serializeWhitespace(e,t,n){null!=t&&t.length>0?e.appendString(t):n&&e.appendString(" ")}static serializeValuesWithWhitespace(e,t){const n=t.getValues(),s=t.getWhitespaces(),r=t.getComment();if(null!==n){for(let t=0;t<n.length;t++){let r=null;t<s.length&&(r=s[t]),0===t?o.serializeWhitespace(e,r,!1):o.serializeWhitespace(e,r,!0),o.serializeValue(e,n[t])}if(s.length>=n.length+1){const t=s[n.length];o.serializeWhitespace(e,t,!1)}else null!=r&&n.length>0&&e.appendString(" ")}else{const t=s[0];o.serializeWhitespace(e,t,!1)}}static serializeValuesWithoutWhitespace(e,t){const n=t.getValues(),s=t.getComment();if(null===n)return;let r=!1;for(const t of n)r?e.appendString(" "):r=!0,o.serializeValue(e,t);null!=s&&n.length>0&&e.appendString(" ")}}t.default=o},993:()=>{}},t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,n),r.exports}var s={};return(()=>{"use strict";var e=s;Object.defineProperty(e,"__esModule",{value:!0}),e.StringUtil=e.WsvParserException=e.WsvDocument=e.WsvLine=e.WsvChar=e.SmlParserException=e.SmlEmptyNode=e.SmlNode=e.SmlNamedNode=e.SmlElement=e.SmlDocument=e.SmlAttribute=e.ReliableTxtFile=e.ReliableTxtEncoding=e.ReliableTxtException=e.ReliableTxtDocument=void 0;const t=n(43);Object.defineProperty(e,"ReliableTxtDocument",{enumerable:!0,get:function(){return t.ReliableTxtDocument}});const r=n(43);Object.defineProperty(e,"ReliableTxtException",{enumerable:!0,get:function(){return r.ReliableTxtException}});const i=n(43);Object.defineProperty(e,"ReliableTxtEncoding",{enumerable:!0,get:function(){return i.ReliableTxtEncoding}});const a=n(43);Object.defineProperty(e,"ReliableTxtFile",{enumerable:!0,get:function(){return a.ReliableTxtFile}});const o=n(43);Object.defineProperty(e,"SmlAttribute",{enumerable:!0,get:function(){return o.SmlAttribute}});const u=n(43);Object.defineProperty(e,"SmlDocument",{enumerable:!0,get:function(){return u.SmlDocument}});const l=n(43);Object.defineProperty(e,"SmlElement",{enumerable:!0,get:function(){return l.SmlElement}});const d=n(43);Object.defineProperty(e,"SmlNamedNode",{enumerable:!0,get:function(){return d.SmlNamedNode}});const c=n(43);Object.defineProperty(e,"SmlNode",{enumerable:!0,get:function(){return c.SmlNode}});const f=n(43);Object.defineProperty(e,"SmlEmptyNode",{enumerable:!0,get:function(){return f.SmlEmptyNode}});const h=n(43);Object.defineProperty(e,"SmlParserException",{enumerable:!0,get:function(){return h.SmlParserException}});const p=n(43);Object.defineProperty(e,"WsvChar",{enumerable:!0,get:function(){return p.WsvChar}});const m=n(43);Object.defineProperty(e,"WsvLine",{enumerable:!0,get:function(){return m.WsvLine}});const g=n(43);Object.defineProperty(e,"WsvDocument",{enumerable:!0,get:function(){return g.WsvDocument}});const b=n(43);Object.defineProperty(e,"WsvParserException",{enumerable:!0,get:function(){return b.WsvParserException}});const v=n(43);Object.defineProperty(e,"StringUtil",{enumerable:!0,get:function(){return v.StringUtil}})})(),s})()}));