!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SML=t():e.SML=t()}(self,(function(){return e={590:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtil=t.WsvParserException=t.WsvDocument=t.WsvLine=t.WsvChar=t.SmlRequest=t.SmlParserException=t.SmlEmptyNode=t.SmlNode=t.SmlNamedNode=t.SmlElement=t.SmlDocument=t.SmlAttribute=t.ReliableTxtFile=t.ReliableTxtEncoding=t.ReliableTxtException=t.ReliableTxtDocument=void 0;const i=n(43);Object.defineProperty(t,"ReliableTxtDocument",{enumerable:!0,get:function(){return i.ReliableTxtDocument}});const r=n(43);Object.defineProperty(t,"ReliableTxtException",{enumerable:!0,get:function(){return r.ReliableTxtException}});const o=n(43);Object.defineProperty(t,"ReliableTxtEncoding",{enumerable:!0,get:function(){return o.ReliableTxtEncoding}});const a=n(43);Object.defineProperty(t,"ReliableTxtFile",{enumerable:!0,get:function(){return a.ReliableTxtFile}});const u=n(43);Object.defineProperty(t,"SmlAttribute",{enumerable:!0,get:function(){return u.SmlAttribute}});const l=n(43);Object.defineProperty(t,"SmlDocument",{enumerable:!0,get:function(){return l.SmlDocument}});const d=n(43);Object.defineProperty(t,"SmlElement",{enumerable:!0,get:function(){return d.SmlElement}});const c=n(43);Object.defineProperty(t,"SmlNamedNode",{enumerable:!0,get:function(){return c.SmlNamedNode}});const h=n(43);Object.defineProperty(t,"SmlNode",{enumerable:!0,get:function(){return h.SmlNode}});const f=n(43);Object.defineProperty(t,"SmlEmptyNode",{enumerable:!0,get:function(){return f.SmlEmptyNode}});const p=n(43);Object.defineProperty(t,"SmlParserException",{enumerable:!0,get:function(){return p.SmlParserException}});const m=s(n(379));t.SmlRequest=m.default;const g=n(43);Object.defineProperty(t,"WsvChar",{enumerable:!0,get:function(){return g.WsvChar}});const v=n(43);Object.defineProperty(t,"WsvLine",{enumerable:!0,get:function(){return v.WsvLine}});const _=n(43);Object.defineProperty(t,"WsvDocument",{enumerable:!0,get:function(){return _.WsvDocument}});const b=n(43);Object.defineProperty(t,"WsvParserException",{enumerable:!0,get:function(){return b.WsvParserException}});const y=n(43);Object.defineProperty(t,"StringUtil",{enumerable:!0,get:function(){return y.StringUtil}}),console.warn("Experimental > SmlRequest: This feature is a work in progress. Don't depend on it yet. It may go through significant changes.")},379:function(e,t,n){"use strict";var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{u(s.next(e))}catch(e){r(e)}}function a(e){try{u(s.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(43);t.default=class{static get(e){return s(this,void 0,void 0,(function*(){const t=yield fetch(e,{headers:{Accept:"text/plain","Content-Type":"text/plain"},method:"GET"}),n=yield t.text();return i.SmlDocument.parse(n)}))}static post(e,t){return s(this,void 0,void 0,(function*(){const n=yield fetch(e,{body:t.toString(),headers:{Accept:"text/plain","Content-Type":"text/plain"},method:"POST"}),s=yield n.text();return i.SmlDocument.parse(s)}))}static delete(e){return s(this,void 0,void 0,(function*(){const t=yield fetch(e,{headers:{Accept:"text/plain","Content-Type":"text/plain"},method:"DELETE"}),n=yield t.text();return i.SmlDocument.parse(n)}))}static put(e,t){return s(this,void 0,void 0,(function*(){const n=yield fetch(e,{body:t.toString(),headers:{Accept:"text/plain","Content-Type":"text/plain"},method:"PUT"}),s=yield n.text();return i.SmlDocument.parse(s)}))}static patch(e,t){return s(this,void 0,void 0,(function*(){const n=yield fetch(e,{body:t.toString(),headers:{Accept:"text/plain","Content-Type":"text/plain"},method:"PATCH"}),s=yield n.text();return i.SmlDocument.parse(s)}))}}},43:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtil=t.WsvParserException=t.WsvLine=t.WsvDocumentServer=t.WsvDocument=t.WsvChar=t.SmlRequest=t.SmlParserException=t.SmlNode=t.SmlNamedNode=t.SmlEmptyNode=t.SmlElement=t.SmlDocumentServer=t.SmlDocument=t.SmlAttribute=t.ReliableTxtFile=t.ReliableTxtException=t.ReliableTxtEncoding=t.ReliableTxtDocumentServer=t.ReliableTxtDocument=void 0;const i=s(n(765));t.ReliableTxtDocument=i.default;const r=s(n(572));t.ReliableTxtDocumentServer=r.default;const o=s(n(927));t.ReliableTxtEncoding=o.default;const a=s(n(102));t.ReliableTxtException=a.default;const u=s(n(568));t.ReliableTxtFile=u.default;const l=s(n(355));t.SmlAttribute=l.default;const d=s(n(771));t.SmlDocument=d.default;const c=s(n(588));t.SmlDocumentServer=c.default;const h=s(n(597));t.SmlElement=h.default;const f=s(n(41));t.SmlEmptyNode=f.default;const p=s(n(555));t.SmlNamedNode=p.default;const m=s(n(899));t.SmlNode=m.default;const g=s(n(264));t.SmlParserException=g.default;const v=s(n(794));t.SmlRequest=v.default;const _=s(n(897));t.WsvChar=_.default;const b=s(n(499));t.WsvDocument=b.default;const y=s(n(996));t.WsvDocumentServer=y.default;const S=s(n(153));t.WsvLine=S.default;const E=s(n(202));t.WsvParserException=E.default;const x=s(n(223));t.StringUtil=x.default},765:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(223));class r{constructor(...e){return this.text="",this.text=e.join("\n"),this}static join(e){return new r(...e).toString()}setText(e){null!==e&&(this.text=e)}setTextByCodePoints(e){null!==e&&(this.text=i.default.codePointsToString(e))}getText(){return this.text}getTextAsCodePoints(){return i.default.stringToCodePoints(this.text)}setLines(...e){this.text=e.join("\n")}getLines(){return this.text.split("\n")}toString(){return this.text}}t.default=r},572:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(765)),r=s(n(927)),o=s(n(568));class a extends i.default{constructor(...e){return super(...e),this.encoding=r.default.UTF8,this}static load(e){const t=(new o.default).load(e),n=new a(t.getContent());return n.setEncoding(t.getEncoding()),n}setEncoding(e){return this.encoding=e,this}getEncoding(){return this.encoding}save(e){return new o.default(this.encoding).save(e,this.text),this}}t.default=a},927:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.UTF8="utf8",e.UTF16_REVERSED="utf16le"}(n||(n={})),t.default=n},102:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,n)}}t.default=n},568:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(993),r=s(n(927)),o=s(n(102));class a{constructor(e){return this.fileContent="",this.encoding=r.default.UTF8,this.setEncoding(e),this}static getEncodingFromBuffer(e){if(e.length<2)return null;const t=e.readInt8(0),n=e.readInt8(1);return-1===t&&-2===n?r.default.UTF16_REVERSED:-17===t&&-69===n&&e.length>=3&&-65===e.readInt8(2)?r.default.UTF8:null}save(e,t,n){this.setEncoding(n);try{i.writeFileSync(e,"\ufeff"+t,this.encoding)}catch(e){console.error(e)}return this}load(e){try{const t=i.readFileSync(e,Object.assign({flag:"r"})),n=a.getEncodingFromBuffer(t);if(null===n)throw new o.default("Document does not have a ReliableTXT preamble");this.setEncoding(n);const s=i.readFileSync(e,Object.assign({encoding:this.encoding,flag:"r"})).toString();return this.fileContent=s.slice(1),this}catch(e){throw Error(e.message)}}getEncoding(){return this.encoding}getContent(){return this.fileContent}setEncoding(e){return e&&(this.encoding=e),this}}t.default=a},355:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(555)),r=s(n(650));class o extends i.default{constructor(e,t){super(e),this.values=[],this.setValues(...t.map(String))}setValues(...e){if(null===e||0===e.length)throw new Error("Values must contain at least one value");this.values=e.map(String)}getValues(e){return e?this.values.slice(e):this.values}getNumberValues(e){return e?this.values.slice(e).map(Number):this.values.map(Number)}getString(e){return e?this.values[e]:this.values[0]}setString(e){this.values=[e]}toString(){return r.default.serializeAttribute(this)}toWsvLines(e,t,n,s){r.default.serializeAttributeInternal(this,e,t,n)}}t.default=o},771:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(211)),r=s(n(650)),o=s(n(223));class a{constructor(e){this.emptyNodesBefore=[],this.emptyNodesAfter=[],this.endKeyword="End",this.defaultIndentation=null,e&&(this.root=e)}static parse(e){const t=new a;return i.default.parseDocument(e,t)}setEndKeyword(e){this.endKeyword=e}getEndKeyword(){return this.endKeyword}setDefaultIndentation(e){if(!o.default.isWhitespaceOrEmpty(e))throw Error("Invalid indentation");this.defaultIndentation=e}getDefaultIndentation(){return this.defaultIndentation}getRoot(){return this.root}setRoot(e){this.root=e}toString(){return r.default.serializeDocument(this)}}t.default=a},588:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(572)),r=s(n(927)),o=s(n(771)),a=s(n(211));class u extends o.default{constructor(e){return super(e),this.encoding=r.default.UTF8,this}static parse(e){const t=new u;return a.default.parseDocument(e,t)}static load(e){const t=i.default.load(e),n=u.parse(t.getText());return n.setEncoding(t.getEncoding()),n}setEncoding(e){return this.encoding=e,this}getEncoding(){return this.encoding}save(e){return new i.default(this.toString()).setEncoding(this.getEncoding()).save(e),this}}t.default=u},597:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(355)),r=s(n(41)),o=s(n(555)),a=s(n(650)),u=s(n(153));class l extends o.default{constructor(e){super(e),this.nodes=[]}setEndWhitespaces(...e){u.default.validateWhitespaces(e),this.endWhitespaces=e}getEndWhitespaces(){return[...this.endWhitespaces]}setEndComment(e){u.default.validateComment(e),this.endComment=e}getEndComment(){return this.endComment}setEndWhitespacesAndComment(e,t){this.endWhitespaces=e,this.endComment=t}add(e){return this.nodes.push(e),e}addAttribute(e,t){const n=t.map(String),s=new i.default(e,n);return this.add(s),s}addElement(e){const t=new l(e);return this.add(t),t}addEmptyNode(){const e=new r.default;return this.add(e),e}hasAttribute(e){return this.nodes.filter((e=>e instanceof i.default)).map((e=>e)).filter((t=>t.hasName(e))).length>0}getAttribute(e){const t=this.nodes.filter((e=>e instanceof i.default)).map((e=>e)).filter((t=>t.hasName(e))).shift();if(!t)throw Error(`No attribute with name '${e}'`);return t}getAttributes(e){let t=[];return t=e?this.nodes.filter((e=>e instanceof i.default)).map((e=>e)).filter((t=>t.hasName(e))):this.nodes.filter((e=>e instanceof i.default)).map((e=>e)),t}hasElement(e){return this.nodes.filter((e=>e instanceof l)).map((e=>e)).filter((t=>t.hasName(e))).length>0}getElement(e){const t=this.nodes.filter((e=>e instanceof l)).map((e=>e)).filter((t=>t.hasName(e))).shift();if(!t)throw Error(`No element with name '${e}'`);return t}getElements(e){let t=[];return t=e?this.nodes.filter((e=>e instanceof l)).map((e=>e)).filter((t=>t.hasName(e))):this.nodes.filter((e=>e instanceof l)).map((e=>e)),t}getBoolean(e){return Boolean(this.getAttribute(e).getString())}getNumber(e){return Number(this.getAttribute(e).getString())}getString(e){return this.getAttribute(e).getString()}getStringValues(e){return this.getAttribute(e).getValues()}getNumberValues(e){return this.getAttribute(e).getNumberValues()}toString(){return a.default.serializeElement(this)}toWsvLines(e,t,n,s){a.default.serializeElementInternal(this,e,t,n,s)}}t.default=l},41:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(899)),r=s(n(650));class o extends i.default{constructor(){super()}toString(){return r.default.serializeEmptyNode(this)}toWsvLines(e,t,n,s){r.default.serializeEmptyNodeInternal(this,e,t,n)}}t.default=o},555:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(899)),r=s(n(223));class o extends i.default{constructor(e){super(),this.name=e}hasName(e){return r.default.equalsIgnoreCase(this.name,e)}}t.default=o},899:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(153));t.default=class{constructor(){this.whitespaces=null,this.comment=null}setWhitespaces(...e){i.default.validateWhitespaces(e),this.whitespaces=e}getWhitespaces(){return[...this.whitespaces]}setComment(e){i.default.validateComment(e),this.comment=e}getComment(){return this.comment}setWhitespacesAndComment(e,t){this.whitespaces=e,this.comment=t}toWsvLines(e,t,n,s){}}},211:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(355)),r=s(n(597)),o=s(n(41)),a=s(n(264)),u=s(n(223)),l=s(n(499)),d=s(n(769));class c{static parseDocument(e,t){const n=l.default.parse(e),s=c.getEndKeyword(n),i=new d.default(n,s);t.setEndKeyword(s);const r=c.readRootElement(i,t.emptyNodesBefore);return t.setRoot(r),c.readElementContent(i,r),c.readEmptyNodes(t.emptyNodesAfter,i),t}static readRootElement(e,t){if(c.readEmptyNodes(t,e),!e.hasLine())throw new a.default("Root element expected");const n=e.getLine();if(!n.hasValues()||1!==n.getValues().length||u.default.equalsIgnoreCase(n.getValues()[0],e.getEndKeyword()))throw new a.default("Invalid root element start");const s=n.getValues()[0],i=new r.default(s);return i.setWhitespacesAndComment(n.getWhitespaces(),n.getComment()),i}static readNode(e,t){let n;const s=e.getLine();if(s.hasValues()){const o=s.getValues()[0];if(u.default.equalsIgnoreCase(o,e.getEndKeyword())){if(s.getValues().length>1)throw new a.default("Attribute with end keyword name is not allowed");return t.setEndWhitespacesAndComment(s.getWhitespaces(),s.getComment()),null}if(1===s.getValues().length){const t=new r.default(o);t.setWhitespacesAndComment(s.getWhitespaces(),s.getComment()),this.readElementContent(e,t),n=t}else{const e=s.getValues().slice(1),t=new i.default(o,e);t.setWhitespacesAndComment(s.getWhitespaces(),s.getComment()),n=t}}else{const e=new o.default;e.setWhitespacesAndComment(s.getWhitespaces(),s.getComment()),n=e}return n}static readElementContent(e,t){for(;;){if(!e.hasLine())throw new a.default("Element not closed");const n=c.readNode(e,t);if(null==n)break;t.add(n)}}static readEmptyNodes(e,t){for(;t.isEmptyLine();){const n=c.readEmptyNode(t);e.push(n)}}static readEmptyNode(e){const t=e.getLine(),n=new o.default;return n.setWhitespacesAndComment(t.getWhitespaces(),t.getComment()),n}static getEndKeyword(e){for(let t=e.getLines().length-1;t>=0;t--){const n=e.getLine(t).getValues();if(null!==n){if(1===n.length)return n[0];if(n.length>1)break}}throw new a.default("End keyword could not be detected")}}t.default=c},264:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e,...t){super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,n),this.name="SmlParserException",this.message=`${e}`}}t.default=n},794:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{u(s.next(e))}catch(e){r(e)}}function a(e){try{u(s.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),console.log("Experimental > SmlRequest: This feature is a work in progress. Don't depend on it yet. It may go through significant changes."),t.default=class{static get(e){return n(this,void 0,void 0,(function*(){return null}))}static post(e,t){return n(this,void 0,void 0,(function*(){return null}))}static delete(e){return n(this,void 0,void 0,(function*(){return null}))}static put(e,t){return n(this,void 0,void 0,(function*(){return null}))}static patch(e,t){return n(this,void 0,void 0,(function*(){return null}))}}},650:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(499));class r{static serializeDocument(e){const t=new i.default;return r.serialzeEmptyNodes(e.emptyNodesBefore,t),e.getRoot().toWsvLines(t,0,e.getDefaultIndentation(),e.getEndKeyword()),r.serialzeEmptyNodes(e.emptyNodesAfter,t),t.toString()}static serializeElement(e){const t=new i.default;return e.toWsvLines(t,0,null,"End"),t.toString()}static serializeAttribute(e){const t=new i.default;return e.toWsvLines(t,0,null,null),t.toString()}static serializeAttributeInternal(e,t,n,s){const i=r.getWhitespaces(e.getWhitespaces(),n,s),o=[e.name,...e.getValues()];t.addWsvLineBySet(o,i,e.getComment())}static serializeEmptyNode(e){const t=new i.default;return e.toWsvLines(t,0,null,null),t.toString()}static serializeEmptyNodeInternal(e,t,n,s){const i=r.getWhitespaces(e.getWhitespaces(),n,s);t.addWsvLineBySet(null,i,e.getComment())}static serializeElementInternal(e,t,n,s,i){const o=n+1,a=r.getWhitespaces(e.getWhitespaces(),n,s);t.addWsvLineBySet([e.name],a,e.getComment());for(const n of e.nodes)n.toWsvLines(t,o,s,i);const u=r.getWhitespaces(e.getEndWhitespaces(),n,s);t.addWsvLineBySet([i],u,e.getEndComment())}static getWhitespaces(e,t,n){return null!=e&&e.length>0?e:null==n?["\t".repeat(t)]:[n.repeat(t)]}static serialzeEmptyNodes(e,t){for(const n of e)n.toWsvLines(t,0,null,null)}}t.default=r},828:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(223));t.default=class{constructor(){this.codePoints=[]}clear(){this.codePoints=[]}toString(){return i.default.codePointsToString(this.codePoints)}appendCodePoint(e){this.codePoints.push(e)}appendString(e){const t=i.default.stringToCodePoints(e);this.codePoints=[...this.codePoints,...t]}getLength(){return this.codePoints.length}}},223:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(897));class r{static getSubstr(e,t,n){return e.slice(t,t+n).map((e=>String.fromCodePoint(e))).join("")}static stringToCodePoints(e){const t=[];for(const n of e)t.push(n.codePointAt(0));return t}static codePointsToString(e){return e.map((e=>String.fromCodePoint(e))).join("")}static isWhitespaceOrEmpty(e){const t=r.stringToCodePoints(e);for(const e of t)if(!i.default.isWhitespace(e))return!1;return!0}static equalsIgnoreCase(e,t){return"string"==typeof e&&"string"==typeof t?0===e.localeCompare(t,void 0,{sensitivity:"accent"}):e===t}}t.default=r,r.doubleQuote='"'.codePointAt(0),r.lineBreak="\n".codePointAt(0),r.slash="/".codePointAt(0),r.hash="#".codePointAt(0),r.minus="-".codePointAt(0)},897:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static isWhitespace(e){return e>=9&&e<=13||32===e||133===e||160===e||5760===e||e>=8192&&e<=8202||e>=8232&&e<=8233||8239===e||8287===e||12288===e}}},499:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(153)),r=s(n(346)),o=s(n(95));class a{constructor(){this.lines=[]}static parse(e){const t=new a;return r.default.parseDocument(e,t)}addWsvLines(...e){for(const t of e)this.lines.push(t);return this}addWsvLineByValues(...e){const t=new i.default;for(const n of e)t.addValue(n);return this.addWsvLines(t)}addWsvLineBySet(e,t,n){return this.addWsvLines((new i.default).set(e,t,n)),this}getLines(){return this.lines}getLine(e){return this.lines[e]}toArray(){const e=[];for(let t=0;t<this.lines.length;t++)e[t]=this.lines[t].getValues();return e}toString(){return o.default.serializeDocument(this)}}t.default=a},769:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(427));class r extends i.default{constructor(e,t){if(super(),this.index=0,null===t)throw Error("Endkeyword cannot be null");this.wsvDocument=e,this.endKeyword=t}getEndKeyword(){return this.endKeyword}hasLine(){return this.index<this.wsvDocument.getLines().length}isEmptyLine(){return this.hasLine()&&!this.wsvDocument.getLine(this.index).hasValues()}getLine(){const e=this.wsvDocument.getLine(this.index);return this.index++,e}toString(){let e="("+this.index+"): ";return this.hasLine()&&(e+=this.wsvDocument.getLine(this.index).toString()),e}}t.default=r},996:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(572)),r=s(n(927)),o=s(n(499)),a=s(n(346));class u extends o.default{constructor(){return super(),this.encoding=r.default.UTF8,this}static parse(e){const t=new u;return a.default.parseDocument(e,t)}static load(e){const t=i.default.load(e),n=u.parse(t.getText());return n.setEncoding(t.getEncoding()),n}setEncoding(e){return this.encoding=e,this}getEncoding(){return this.encoding}save(e){return new i.default(this.toString()).setEncoding(this.getEncoding()).save(e),this}}t.default=u},153:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(828)),r=s(n(223)),o=s(n(346)),a=s(n(95));class u{constructor(...e){this.values=[],this.comment=null;for(const t of e)this.addValue(t);return this.whitespaces=null,this.comment=null,this}static parse(e){return o.default.parseLine(e)}static validateWhitespaces(e){if(null!==e)for(const t of e)if(null!==t&&!r.default.isWhitespaceOrEmpty(t))throw new Error("Whitespace value contains non whitespace character")}static validateComment(e){if(null!==e&&e.indexOf("\n"))throw new Error("Line break in comment is not allowed")}addValue(e){null===this.values&&(this.values=[]),this.values.push(e)}getValues(){return this.values}setValues(...e){this.values=e}hasValues(){return null!==this.values&&this.values.length>0}setWhitespaces(e){u.validateWhitespaces(e),this.whitespaces=e}getWhitespaces(){return null===this.whitespaces?null:[...this.whitespaces]}setComment(e){u.validateComment(e),this.comment=e}getComment(){return this.comment}set(e,t,n){return this.values=e,this.whitespaces=t,this.comment=n,this}toString(){const e=new i.default;return a.default.serializeLine(e,this),e.toString()}}t.default=u},427:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){}hasLine(){return!1}isEmptyLine(){return!1}getLine(){return null}getEndKeyword(){return null}}},346:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(223)),r=s(n(153)),o=s(n(658)),a=s(n(202));class u{static parseLine(e){const t=new o.default(e),n=u.parseLineWithIterator(t);if(t.tryReadChar(i.default.lineBreak))throw new a.default(t,"Multiple WSV lines not allowed");if(!t.isEndOfText())throw new a.default(t,"WSV line not parsed completely");return n}static parseDocument(e,t){const n=new o.default(e);for(;;){const e=u.parseLineWithIterator(n);if(t.addWsvLines(e),n.isEndOfText())break;if(!n.tryReadChar(i.default.lineBreak))throw new a.default(n,"Invalid WSV document")}if(!n.isEndOfText())throw new a.default(n,"WSV document not parsed completely");return t}static parseLineWithIterator(e){const t=[],n=[];let s=e.readWhitespaceOrNull();for(n.push(s);!e.isChar(i.default.lineBreak)&&!e.isEndOfText();){let r="";if(e.isChar(i.default.hash))break;if(e.tryReadChar(i.default.doubleQuote)?r=e.readString():(r=e.readValue(),"-"===r&&(r=null)),t.push(r),s=e.readWhitespaceOrNull(),null==s)break;n.push(s)}let o=null;return e.tryReadChar(i.default.hash)&&(o=e.readCommentText(),null==s&&n.push(null)),(new r.default).set(t,n,o)}}t.default=u},658:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(828)),r=s(n(223)),o=s(n(897)),a=s(n(202));t.default=class{constructor(e){this.sb=new i.default,this.chars=[],this.index=0,this.chars=r.default.stringToCodePoints(e)}getText(){return r.default.codePointsToString(this.chars)}getLineInfoString(){const e=this.getLineInfo();return`(${e[1]+1}, ${e[2]+1})`}getLineInfo(){let e=0,t=0;for(let n=0;n<this.index;n++)this.chars[n]===r.default.lineBreak?(e++,t=0):t++;return[this.index,e,t]}isEndOfText(){return this.index>=this.chars.length}isChar(e){return!this.isEndOfText()&&this.chars[this.index]===e}tryReadChar(e){return!!this.isChar(e)&&(this.index++,!0)}readCommentText(){const e=this.index;for(;!this.isEndOfText()&&this.chars[this.index]!==r.default.lineBreak;)this.index++;return r.default.getSubstr(this.chars,e,this.index-e)}readWhitespaceOrNull(){const e=this.index;for(;!this.isEndOfText();){const e=this.chars[this.index];if(e===r.default.lineBreak)break;if(!o.default.isWhitespace(e))break;this.index++}return this.index===e?null:r.default.getSubstr(this.chars,e,this.index-e)}readString(){for(this.sb.clear();;){if(this.isEndOfText())throw new a.default(this,"String not closed");const e=this.chars[this.index];if(e===r.default.lineBreak)throw new a.default(this,"String not closed in starting line");if(e===r.default.doubleQuote)if(this.index++,this.tryReadChar(r.default.doubleQuote))this.sb.appendCodePoint(r.default.doubleQuote);else{if(!this.tryReadChar(r.default.slash))break;if(!this.tryReadChar(r.default.doubleQuote))throw new a.default(this,"String expected after linebreak slash");this.sb.appendCodePoint(r.default.lineBreak)}else this.sb.appendCodePoint(e),this.index++}return this.sb.toString()}readValue(){const e=this.index;for(;!this.isEndOfText();){const e=this.chars[this.index];if(o.default.isWhitespace(e)||e===r.default.hash)break;if(e===r.default.doubleQuote)throw new a.default(this,"String starting in value");this.index++}if(this.index===e)throw new a.default(this,"Invalid value");return r.default.getSubstr(this.chars,e,this.index-e)}}},202:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e,t){super(`${t} ${e.getLineInfoString()}`),Error.captureStackTrace&&Error.captureStackTrace(this,n);const s=e.getLineInfo();this.index=s[0],this.lineIndex=s[1],this.linePosition=s[2],this.text=e.getText()}}t.default=n},95:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(828)),r=s(n(223)),o=s(n(897));class a{static containsSpecialChars(e){const t=r.default.stringToCodePoints(e);for(const e of t)if(e===r.default.lineBreak||o.default.isWhitespace(e)||e===r.default.doubleQuote||e===r.default.hash)return!0;return!1}static serializeLine(e,t){null!==t.getWhitespaces()&&t.getWhitespaces().length>0?a.serializeValuesWithWhitespace(e,t):a.serializeValuesWithoutWhitespace(e,t),null!==t.getComment()&&(e.appendCodePoint(r.default.hash),e.appendString(t.getComment()))}static serializeDocument(e){const t=new i.default;let n=!0;for(const s of e.getLines())n?n=!1:t.appendCodePoint(r.default.lineBreak),a.serializeLine(t,s);return t.toString()}static serializeValue(e,t){if(null===t)e.appendString("-");else if(""===t)e.appendString('""');else if("-"===t)e.appendString('"-"');else if(a.containsSpecialChars(t)){e.appendCodePoint(r.default.hash);const n=r.default.stringToCodePoints(t);for(const t of n)t===r.default.lineBreak?e.appendString('"/"'):t===r.default.hash?e.appendString('""'):e.appendCodePoint(t);e.appendCodePoint(r.default.hash)}else e.appendString(t)}static serializeWhitespace(e,t,n){null!=t&&t.length>0?e.appendString(t):n&&e.appendString(" ")}static serializeValuesWithWhitespace(e,t){const n=t.getValues(),s=t.getWhitespaces(),i=t.getComment();if(null!==n){for(let t=0;t<n.length;t++){let i=null;t<s.length&&(i=s[t]),0===t?a.serializeWhitespace(e,i,!1):a.serializeWhitespace(e,i,!0),a.serializeValue(e,n[t])}if(s.length>=n.length+1){const t=s[n.length];a.serializeWhitespace(e,t,!1)}else null!=i&&n.length>0&&e.appendString(" ")}else{const t=s[0];a.serializeWhitespace(e,t,!1)}}static serializeValuesWithoutWhitespace(e,t){const n=t.getValues(),s=t.getComment();if(null===n)return;let i=!1;for(const t of n)i?e.appendString(" "):i=!0,a.serializeValue(e,t);null!=s&&n.length>0&&e.appendString(" ")}}t.default=a},993:()=>{}},t={},function n(s){if(t[s])return t[s].exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,n),i.exports}(590);var e,t}));