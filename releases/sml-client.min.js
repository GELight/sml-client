!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SML=t():e.SML=t()}(self,(function(){return e={590:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtil=t.WsvDocumentLineIterator=t.WsvParserException=t.WsvDocument=t.WsvLine=t.WsvChar=t.SmlRequest=t.SmlParserException=t.SmlEmptyNode=t.SmlNode=t.SmlNamedNode=t.SmlElement=t.SmlDocument=t.SmlAttribute=t.ReliableTxtFile=t.ReliableTxtEncoding=t.ReliableTxtException=t.ReliableTxtDocument=void 0;const r=n(43);Object.defineProperty(t,"ReliableTxtDocument",{enumerable:!0,get:function(){return r.ReliableTxtDocument}}),Object.defineProperty(t,"ReliableTxtEncoding",{enumerable:!0,get:function(){return r.ReliableTxtEncoding}}),Object.defineProperty(t,"ReliableTxtException",{enumerable:!0,get:function(){return r.ReliableTxtException}}),Object.defineProperty(t,"ReliableTxtFile",{enumerable:!0,get:function(){return r.ReliableTxtFile}});const s=n(43);Object.defineProperty(t,"StringUtil",{enumerable:!0,get:function(){return s.StringUtil}}),Object.defineProperty(t,"WsvChar",{enumerable:!0,get:function(){return s.WsvChar}}),Object.defineProperty(t,"WsvDocument",{enumerable:!0,get:function(){return s.WsvDocument}}),Object.defineProperty(t,"WsvDocumentLineIterator",{enumerable:!0,get:function(){return s.WsvDocumentLineIterator}}),Object.defineProperty(t,"WsvLine",{enumerable:!0,get:function(){return s.WsvLine}}),Object.defineProperty(t,"WsvParserException",{enumerable:!0,get:function(){return s.WsvParserException}});const o=n(43);Object.defineProperty(t,"SmlAttribute",{enumerable:!0,get:function(){return o.SmlAttribute}}),Object.defineProperty(t,"SmlDocument",{enumerable:!0,get:function(){return o.SmlDocument}}),Object.defineProperty(t,"SmlElement",{enumerable:!0,get:function(){return o.SmlElement}}),Object.defineProperty(t,"SmlEmptyNode",{enumerable:!0,get:function(){return o.SmlEmptyNode}}),Object.defineProperty(t,"SmlNamedNode",{enumerable:!0,get:function(){return o.SmlNamedNode}}),Object.defineProperty(t,"SmlNode",{enumerable:!0,get:function(){return o.SmlNode}}),Object.defineProperty(t,"SmlParserException",{enumerable:!0,get:function(){return o.SmlParserException}});const l=i(n(379));t.SmlRequest=l.default,console.warn("Experimental > SmlRequest: This feature is a work in progress. Don't depend on it yet. It may go through significant changes.")},379:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{a(i.next(e))}catch(e){s(e)}}function l(e){try{a(i.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}a((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(43);t.default=class{static get(e){return i(this,void 0,void 0,(function*(){const t=yield fetch(e,{headers:{Accept:"text/plain","Content-Type":"text/plain"},method:"GET"}),n=yield t.text();return r.SmlDocument.parse(n)}))}static post(e,t){return i(this,void 0,void 0,(function*(){const n=yield fetch(e,{body:t.toString(),headers:{Accept:"text/plain","Content-Type":"text/plain"},method:"POST"}),i=yield n.text();return r.SmlDocument.parse(i)}))}static delete(e){return i(this,void 0,void 0,(function*(){const t=yield fetch(e,{headers:{Accept:"text/plain","Content-Type":"text/plain"},method:"DELETE"}),n=yield t.text();return r.SmlDocument.parse(n)}))}static put(e,t){return i(this,void 0,void 0,(function*(){const n=yield fetch(e,{body:t.toString(),headers:{Accept:"text/plain","Content-Type":"text/plain"},method:"PUT"}),i=yield n.text();return r.SmlDocument.parse(i)}))}static patch(e,t){return i(this,void 0,void 0,(function*(){const n=yield fetch(e,{body:t.toString(),headers:{Accept:"text/plain","Content-Type":"text/plain"},method:"PATCH"}),i=yield n.text();return r.SmlDocument.parse(i)}))}}},894:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtil=t.ReliableTxtFile=t.ReliableTxtException=t.ReliableTxtEncoding=t.ReliableTxtDocumentServer=t.ReliableTxtDocument=void 0;const r=i(n(543));t.ReliableTxtDocument=r.default;const s=i(n(176));t.ReliableTxtDocumentServer=s.default;const o=i(n(938));t.ReliableTxtEncoding=o.default;const l=i(n(922));t.ReliableTxtException=l.default;const a=i(n(25));t.ReliableTxtFile=a.default;const u=i(n(966));t.StringUtil=u.default},543:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(966));class s{constructor(...e){return this.text="",this.text=e.join("\n"),this}static join(e){return new s(...e).toString()}setText(e){null!=e&&(this.text=e)}setTextByCodePoints(e){null!=e&&Array.isArray(e)&&(this.text=r.default.codePointsToString(e))}getText(){return this.text}getTextAsCodePoints(){return r.default.stringToCodePoints(this.text)}setLines(...e){this.text=e.join("\n")}getLines(){return this.text.split("\n")}toString(){return this.text}}t.default=s},176:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(543)),s=i(n(938)),o=i(n(25));class l extends r.default{constructor(...e){return super(...e),this.encoding=s.default.UTF8,this}static load(e){const t=(new o.default).load(e),n=new l(t.getContent());return n.setEncoding(t.getEncoding()),n}setEncoding(e){return this.encoding=e,this}getEncoding(){return this.encoding}save(e){return new o.default(this.encoding).save(e,this.text),this}}t.default=l},938:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.UTF8="utf8",e.UTF16_REVERSED="utf16le"}(n||(n={})),t.default=n},922:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,n)}}t.default=n},25:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(436),s=i(n(938)),o=i(n(922));class l{constructor(e){return this.fileContent="",this.encoding=s.default.UTF8,this.setEncoding(e),this}static getEncodingFromBuffer(e){if(e.length<2)return null;const t=e.readInt8(0),n=e.readInt8(1);return-1===t&&-2===n?s.default.UTF16_REVERSED:-17===t&&-69===n&&e.length>=3&&-65===e.readInt8(2)?s.default.UTF8:null}save(e,t,n){this.setEncoding(n);try{(0,r.writeFileSync)(e,"\ufeff"+t,this.encoding)}catch(e){console.error(e)}return this}load(e){try{const t=(0,r.readFileSync)(e,Object.assign({flag:"r"})),n=l.getEncodingFromBuffer(t);if(null===n)throw new o.default("Document does not have a ReliableTXT preamble");this.setEncoding(n);const i=(0,r.readFileSync)(e,Object.assign({encoding:this.encoding,flag:"r"})).toString();return this.fileContent=i.slice(1),this}catch(e){throw Error(e.message)}}getEncoding(){return this.encoding}getContent(){return this.fileContent}setEncoding(e){return e&&(this.encoding=e),this}}t.default=l},966:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{static getSubstr(e,t,n){return e.slice(t,t+n).map((e=>String.fromCodePoint(e))).join("")}static stringToCodePoints(e){const t=[];for(const n of e)t.push(n.codePointAt(0));return t}static codePointsToString(e){return e.map((e=>String.fromCodePoint(e))).join("")}static equalsIgnoreCase(e,t){return"string"==typeof e&&"string"==typeof t?0===e.localeCompare(t,void 0,{sensitivity:"accent"}):e===t}}t.default=n,n.doubleQuote='"'.codePointAt(0),n.lineBreak="\n".codePointAt(0),n.slash="/".codePointAt(0),n.hash="#".codePointAt(0),n.minus="-".codePointAt(0)},43:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtil=t.WsvParserException=t.WsvLine=t.WsvDocumentServer=t.WsvDocument=t.WsvChar=t.SmlRequest=t.SmlParserException=t.SmlNode=t.SmlNamedNode=t.SmlEmptyNode=t.SmlElement=t.SmlDocumentServer=t.SmlDocument=t.SmlAttribute=t.ReliableTxtFile=t.ReliableTxtException=t.ReliableTxtEncoding=t.ReliableTxtDocumentServer=t.ReliableTxtDocument=void 0;const r=n(945);Object.defineProperty(t,"ReliableTxtDocument",{enumerable:!0,get:function(){return r.ReliableTxtDocument}}),Object.defineProperty(t,"ReliableTxtDocumentServer",{enumerable:!0,get:function(){return r.ReliableTxtDocumentServer}}),Object.defineProperty(t,"ReliableTxtEncoding",{enumerable:!0,get:function(){return r.ReliableTxtEncoding}}),Object.defineProperty(t,"ReliableTxtException",{enumerable:!0,get:function(){return r.ReliableTxtException}}),Object.defineProperty(t,"ReliableTxtFile",{enumerable:!0,get:function(){return r.ReliableTxtFile}}),Object.defineProperty(t,"StringUtil",{enumerable:!0,get:function(){return r.StringUtil}}),Object.defineProperty(t,"WsvChar",{enumerable:!0,get:function(){return r.WsvChar}}),Object.defineProperty(t,"WsvDocument",{enumerable:!0,get:function(){return r.WsvDocument}}),Object.defineProperty(t,"WsvDocumentServer",{enumerable:!0,get:function(){return r.WsvDocumentServer}}),Object.defineProperty(t,"WsvLine",{enumerable:!0,get:function(){return r.WsvLine}}),Object.defineProperty(t,"WsvParserException",{enumerable:!0,get:function(){return r.WsvParserException}});const s=i(n(355));t.SmlAttribute=s.default;const o=i(n(771));t.SmlDocument=o.default;const l=i(n(588));t.SmlDocumentServer=l.default;const a=i(n(597));t.SmlElement=a.default;const u=i(n(41));t.SmlEmptyNode=u.default;const c=i(n(555));t.SmlNamedNode=c.default;const d=i(n(899));t.SmlNode=d.default;const h=i(n(264));t.SmlParserException=h.default;const f=i(n(794));t.SmlRequest=f.default},355:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(555)),s=i(n(650));class o extends r.default{constructor(e,t){super(e),this.values=[],this.setValues(...t.map(String))}setValues(...e){if(null===e||0===e.length)throw new Error("Values must contain at least one value");this.values=e.map(String)}getValues(e){return e?this.values.slice(e):this.values}getNumberValues(e){return e?this.values.slice(e).map(Number):this.values.map(Number)}getString(e){return e?this.values[e]:this.values[0]}setString(e){this.values=[e]}toString(){return s.default.serializeAttribute(this)}toWsvLines(e,t,n,i){s.default.serializeAttributeInternal(this,e,t,n)}}t.default=o},771:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(945),s=i(n(211)),o=i(n(650));class l{constructor(e){this.emptyNodesBefore=[],this.emptyNodesAfter=[],this.endKeyword="End",this.defaultIndentation=null,e&&(this.root=e)}static parse(e){const t=new l;return s.default.parseDocument(e,t)}setEndKeyword(e){this.endKeyword=e}getEndKeyword(){return this.endKeyword}setDefaultIndentation(e){if(!r.StringUtil.isWhitespaceOrEmpty(e))throw Error("Invalid indentation");this.defaultIndentation=e}getDefaultIndentation(){return this.defaultIndentation}getRoot(){return this.root}setRoot(e){this.root=e}toString(){return o.default.serializeDocument(this)}}t.default=l},588:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(945),s=i(n(771)),o=i(n(211));class l extends s.default{constructor(e){return super(e),this.encoding=r.ReliableTxtEncoding.UTF8,this}static parse(e){const t=new l;return o.default.parseDocument(e,t)}static load(e){const t=r.ReliableTxtDocumentServer.load(e),n=l.parse(t.getText());return n.setEncoding(t.getEncoding()),n}setEncoding(e){return this.encoding=e,this}getEncoding(){return this.encoding}save(e){return new r.ReliableTxtDocumentServer(this.toString()).setEncoding(this.getEncoding()).save(e),this}}t.default=l},597:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(945),s=i(n(355)),o=i(n(41)),l=i(n(555)),a=i(n(650));class u extends l.default{constructor(e){super(e),this.nodes=[]}setEndWhitespaces(...e){r.WsvLine.validateWhitespaces(e),this.endWhitespaces=e}getEndWhitespaces(){return[...this.endWhitespaces]}setEndComment(e){r.WsvLine.validateComment(e),this.endComment=e}getEndComment(){return this.endComment}setEndWhitespacesAndComment(e,t){this.endWhitespaces=e,this.endComment=t}add(e){return this.nodes.push(e),e}addAttribute(e,t){const n=t.map(String),i=new s.default(e,n);return this.add(i),i}addElement(e){const t=new u(e);return this.add(t),t}addEmptyNode(){const e=new o.default;return this.add(e),e}hasAttribute(e){return this.nodes.filter((e=>e instanceof s.default)).map((e=>e)).filter((t=>t.hasName(e))).length>0}getAttribute(e){const t=this.nodes.filter((e=>e instanceof s.default)).map((e=>e)).filter((t=>t.hasName(e))).shift();if(!t)throw Error(`No attribute with name '${e}'`);return t}getAttributes(e){let t=[];return t=e?this.nodes.filter((e=>e instanceof s.default)).map((e=>e)).filter((t=>t.hasName(e))):this.nodes.filter((e=>e instanceof s.default)).map((e=>e)),t}hasElement(e){return this.nodes.filter((e=>e instanceof u)).map((e=>e)).filter((t=>t.hasName(e))).length>0}getElement(e){const t=this.nodes.filter((e=>e instanceof u)).map((e=>e)).filter((t=>t.hasName(e))).shift();if(!t)throw Error(`No element with name '${e}'`);return t}getElements(e){let t=[];return t=e?this.nodes.filter((e=>e instanceof u)).map((e=>e)).filter((t=>t.hasName(e))):this.nodes.filter((e=>e instanceof u)).map((e=>e)),t}getBoolean(e){return Boolean(this.getAttribute(e).getString())}getNumber(e){return Number(this.getAttribute(e).getString())}getString(e){return this.getAttribute(e).getString()}getStringValues(e){return this.getAttribute(e).getValues()}getNumberValues(e){return this.getAttribute(e).getNumberValues()}toString(){return a.default.serializeElement(this)}toWsvLines(e,t,n,i){a.default.serializeElementInternal(this,e,t,n,i)}}t.default=u},41:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(899)),s=i(n(650));class o extends r.default{constructor(){super()}toString(){return s.default.serializeEmptyNode(this)}toWsvLines(e,t,n,i){s.default.serializeEmptyNodeInternal(this,e,t,n)}}t.default=o},555:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(945),s=i(n(899));class o extends s.default{constructor(e){super(),this.name=e}hasName(e){return r.StringUtil.equalsIgnoreCase(this.name,e)}}t.default=o},899:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(945);t.default=class{constructor(){this.whitespaces=null,this.comment=null}setWhitespaces(...e){i.WsvLine.validateWhitespaces(e),this.whitespaces=e}getWhitespaces(){return null===this.whitespaces?null:[...this.whitespaces]}setComment(e){i.WsvLine.validateComment(e),this.comment=e}getComment(){return this.comment}setWhitespacesAndComment(e,t){this.whitespaces=e,this.comment=t}toWsvLines(e,t,n,i){}}},211:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(945),s=i(n(355)),o=i(n(597)),l=i(n(41)),a=i(n(264));class u{static parseDocument(e,t){const n=r.WsvDocument.parse(e),i=u.getEndKeyword(n),s=new r.WsvDocumentLineIterator(n,i);t.setEndKeyword(i);const o=u.readRootElement(s,t.emptyNodesBefore);return t.setRoot(o),u.readElementContent(s,o),u.readEmptyNodes(t.emptyNodesAfter,s),t}static readRootElement(e,t){if(u.readEmptyNodes(t,e),!e.hasLine())throw new a.default("Root element expected");const n=e.getLine();if(!n.hasValues()||1!==n.getValues().length||r.StringUtil.equalsIgnoreCase(n.getValues()[0],e.getEndKeyword()))throw new a.default("Invalid root element start");const i=n.getValues()[0],s=new o.default(i);return s.setWhitespacesAndComment(n.getWhitespaces(),n.getComment()),s}static readNode(e,t){let n;const i=e.getLine();if(i.hasValues()){const l=i.getValues()[0];if(r.StringUtil.equalsIgnoreCase(l,e.getEndKeyword())){if(i.getValues().length>1)throw new a.default("Attribute with end keyword name is not allowed");return t.setEndWhitespacesAndComment(i.getWhitespaces(),i.getComment()),null}if(1===i.getValues().length){const t=new o.default(l);t.setWhitespacesAndComment(i.getWhitespaces(),i.getComment()),this.readElementContent(e,t),n=t}else{const e=i.getValues().slice(1),t=new s.default(l,e);t.setWhitespacesAndComment(i.getWhitespaces(),i.getComment()),n=t}}else{const e=new l.default;e.setWhitespacesAndComment(i.getWhitespaces(),i.getComment()),n=e}return n}static readElementContent(e,t){for(;;){if(!e.hasLine())throw new a.default("Element not closed");const n=u.readNode(e,t);if(null==n)break;t.add(n)}}static readEmptyNodes(e,t){for(;t.isEmptyLine();){const n=u.readEmptyNode(t);e.push(n)}}static readEmptyNode(e){const t=e.getLine(),n=new l.default;return n.setWhitespacesAndComment(t.getWhitespaces(),t.getComment()),n}static getEndKeyword(e){for(let t=e.getLines().length-1;t>=0;t--){const n=e.getLine(t).getValues();if(null!==n){if(1===n.length)return n[0];if(n.length>1)break}}throw new a.default("End keyword could not be detected")}}t.default=u},264:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e,...t){super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,n),this.name="SmlParserException",this.message=`${e}`}}t.default=n},794:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{a(i.next(e))}catch(e){s(e)}}function l(e){try{a(i.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}a((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),console.log("Experimental > SmlRequest: This feature is a work in progress. Don't depend on it yet. It may go through significant changes."),t.default=class{static get(e){return n(this,void 0,void 0,(function*(){return null}))}static post(e,t){return n(this,void 0,void 0,(function*(){return null}))}static delete(e){return n(this,void 0,void 0,(function*(){return null}))}static put(e,t){return n(this,void 0,void 0,(function*(){return null}))}static patch(e,t){return n(this,void 0,void 0,(function*(){return null}))}}},650:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(945);class r{static serializeDocument(e){const t=new i.WsvDocument;return r.serialzeEmptyNodes(e.emptyNodesBefore,t),e.getRoot().toWsvLines(t,0,e.getDefaultIndentation(),e.getEndKeyword()),r.serialzeEmptyNodes(e.emptyNodesAfter,t),t.toString()}static serializeElement(e){const t=new i.WsvDocument;return e.toWsvLines(t,0,null,"End"),t.toString()}static serializeAttribute(e){const t=new i.WsvDocument;return e.toWsvLines(t,0,null,null),t.toString()}static serializeAttributeInternal(e,t,n,i){const s=r.getWhitespaces(e.getWhitespaces(),n,i),o=[e.name,...e.getValues()];t.addWsvLineBySet(o,s,e.getComment())}static serializeEmptyNode(e){const t=new i.WsvDocument;return e.toWsvLines(t,0,null,null),t.toString()}static serializeEmptyNodeInternal(e,t,n,i){const s=r.getWhitespaces(e.getWhitespaces(),n,i);t.addWsvLineBySet(null,s,e.getComment())}static serializeElementInternal(e,t,n,i,s){const o=n+1,l=r.getWhitespaces(e.getWhitespaces(),n,i);t.addWsvLineBySet([e.name],l,e.getComment());for(const n of e.nodes)n.toWsvLines(t,o,i,s);const a=r.getWhitespaces(e.getEndWhitespaces(),n,i);t.addWsvLineBySet([s],a,e.getEndComment())}static getWhitespaces(e,t,n){return null!=e&&e.length>0?e:null==n?["\t".repeat(t)]:[n.repeat(t)]}static serialzeEmptyNodes(e,t){for(const n of e)n.toWsvLines(t,0,null,null)}}t.default=r},945:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtilWsv=t.WsvParserException=t.WsvParserCharIterator=t.WsvLine=t.WsvDocumentServer=t.WsvDocumentLineIterator=t.WsvDocument=t.WsvChar=t.StringUtil=t.ReliableTxtFile=t.ReliableTxtException=t.ReliableTxtEncoding=t.ReliableTxtDocumentServer=t.ReliableTxtDocument=void 0;const r=n(894);Object.defineProperty(t,"ReliableTxtDocument",{enumerable:!0,get:function(){return r.ReliableTxtDocument}}),Object.defineProperty(t,"ReliableTxtDocumentServer",{enumerable:!0,get:function(){return r.ReliableTxtDocumentServer}}),Object.defineProperty(t,"ReliableTxtEncoding",{enumerable:!0,get:function(){return r.ReliableTxtEncoding}}),Object.defineProperty(t,"ReliableTxtException",{enumerable:!0,get:function(){return r.ReliableTxtException}}),Object.defineProperty(t,"ReliableTxtFile",{enumerable:!0,get:function(){return r.ReliableTxtFile}}),Object.defineProperty(t,"StringUtil",{enumerable:!0,get:function(){return r.StringUtil}});const s=i(n(236));t.StringUtilWsv=s.default;const o=i(n(36));t.WsvChar=o.default;const l=i(n(806));t.WsvDocument=l.default;const a=i(n(90));t.WsvDocumentLineIterator=a.default;const u=i(n(223));t.WsvDocumentServer=u.default;const c=i(n(534));t.WsvLine=c.default;const d=i(n(135));t.WsvParserCharIterator=d.default;const h=i(n(495));t.WsvParserException=h.default},246:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(894);t.default=class{constructor(){this.codePoints=[]}clear(){this.codePoints=[]}toString(){return i.StringUtil.codePointsToString(this.codePoints)}appendCodePoint(e){this.codePoints.push(e)}appendString(e){const t=i.StringUtil.stringToCodePoints(e);this.codePoints=[...this.codePoints,...t]}getLength(){return this.codePoints.length}}},236:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(894),s=i(n(36));class o extends r.StringUtil{static isWhitespaceOrEmpty(e){const t=r.StringUtil.stringToCodePoints(e);for(const e of t)if(!s.default.isWhitespace(e))return!1;return!0}}t.default=o},36:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static isWhitespace(e){return e>=9&&e<=13||32===e||133===e||160===e||5760===e||e>=8192&&e<=8202||e>=8232&&e<=8233||8239===e||8287===e||12288===e}}},806:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(534)),s=i(n(280)),o=i(n(907));class l{constructor(){this.lines=[]}static parse(e){const t=new l;return s.default.parseDocument(e,t)}addWsvLines(...e){for(const t of e)this.lines.push(t);return this}addWsvLineByValues(...e){const t=new r.default;for(const n of e)t.addValue(n);return this.addWsvLines(t)}addWsvLineBySet(e,t,n){return this.addWsvLines((new r.default).set(e,t,n)),this}getLines(){return this.lines}getLine(e){return this.lines[e]}toArray(){const e=[];for(let t=0;t<this.lines.length;t++)e[t]=this.lines[t].getValues();return e}toString(){return o.default.serializeDocument(this)}}t.default=l},90:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(460));class s extends r.default{constructor(e,t){if(super(),this.index=0,null===t)throw Error("Endkeyword cannot be null");this.wsvDocument=e,this.endKeyword=t}getEndKeyword(){return this.endKeyword}hasLine(){return this.index<this.wsvDocument.getLines().length}isEmptyLine(){return this.hasLine()&&!this.wsvDocument.getLine(this.index).hasValues()}getLine(){const e=this.wsvDocument.getLine(this.index);return this.index++,e}toString(){let e="("+this.index+"): ";return this.hasLine()&&(e+=this.wsvDocument.getLine(this.index).toString()),e}}t.default=s},223:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(894),s=i(n(806)),o=i(n(280));class l extends s.default{constructor(){return super(),this.encoding=r.ReliableTxtEncoding.UTF8,this}static parse(e){const t=new l;return o.default.parseDocument(e,t)}static load(e){const t=r.ReliableTxtDocumentServer.load(e),n=l.parse(t.getText());return n.setEncoding(t.getEncoding()),n}setEncoding(e){return this.encoding=e,this}getEncoding(){return this.encoding}save(e){return new r.ReliableTxtDocumentServer(this.toString()).setEncoding(this.getEncoding()).save(e),this}}t.default=l},534:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(894),s=i(n(246)),o=i(n(280)),l=i(n(907));class a{constructor(...e){this.values=[],this.comment=null;for(const t of e)this.addValue(t);return this.whitespaces=null,this.comment=null,this}static parse(e){return o.default.parseLine(e)}static validateWhitespaces(e){if(null!==e)for(const t of e)if(null!==t&&!r.StringUtil.isWhitespaceOrEmpty(t))throw new Error("Whitespace value contains non whitespace character")}static validateComment(e){if(null!==e&&e.indexOf("\n"))throw new Error("Line break in comment is not allowed")}addValue(e){null===this.values&&(this.values=[]),this.values.push(e)}getValues(){return this.values}setValues(...e){this.values=e}hasValues(){return null!==this.values&&this.values.length>0}setWhitespaces(e){a.validateWhitespaces(e),this.whitespaces=e}getWhitespaces(){return null===this.whitespaces?null:[...this.whitespaces]}setComment(e){a.validateComment(e),this.comment=e}getComment(){return this.comment}set(e,t,n){return this.values=e,this.whitespaces=t,this.comment=n,this}toString(){const e=new s.default;return l.default.serializeLine(e,this),e.toString()}}t.default=a},460:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){}hasLine(){return!1}isEmptyLine(){return!1}getLine(){return null}getEndKeyword(){return null}}},280:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(894),s=i(n(534)),o=i(n(135)),l=i(n(495));class a{static parseLine(e){const t=new o.default(e),n=a.parseLineWithIterator(t);if(t.tryReadChar(r.StringUtil.lineBreak))throw new l.default(t,"Multiple WSV lines not allowed");if(!t.isEndOfText())throw new l.default(t,"WSV line not parsed completely");return n}static parseDocument(e,t){const n=new o.default(e);for(;;){const e=a.parseLineWithIterator(n);if(t.addWsvLines(e),n.isEndOfText())break;if(!n.tryReadChar(r.StringUtil.lineBreak))throw new l.default(n,"Invalid WSV document")}if(!n.isEndOfText())throw new l.default(n,"WSV document not parsed completely");return t}static parseLineWithIterator(e){const t=[],n=[];let i=e.readWhitespaceOrNull();for(n.push(i);!e.isChar(r.StringUtil.lineBreak)&&!e.isEndOfText();){let s="";if(e.isChar(r.StringUtil.hash))break;if(e.tryReadChar(r.StringUtil.doubleQuote)?s=e.readString():(s=e.readValue(),"-"===s&&(s=null)),t.push(s),i=e.readWhitespaceOrNull(),null==i)break;n.push(i)}let o=null;return e.tryReadChar(r.StringUtil.hash)&&(o=e.readCommentText(),null==i&&n.push(null)),(new s.default).set(t,n,o)}}t.default=a},135:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(894),s=i(n(246)),o=i(n(36)),l=i(n(495));t.default=class{constructor(e){this.sb=new s.default,this.chars=[],this.index=0,this.chars=r.StringUtil.stringToCodePoints(e)}getText(){return r.StringUtil.codePointsToString(this.chars)}getLineInfoString(){const e=this.getLineInfo();return`(${e[1]+1}, ${e[2]+1})`}getLineInfo(){let e=0,t=0;for(let n=0;n<this.index;n++)this.chars[n]===r.StringUtil.lineBreak?(e++,t=0):t++;return[this.index,e,t]}isEndOfText(){return this.index>=this.chars.length}isChar(e){return!this.isEndOfText()&&this.chars[this.index]===e}tryReadChar(e){return!!this.isChar(e)&&(this.index++,!0)}readCommentText(){const e=this.index;for(;!this.isEndOfText()&&this.chars[this.index]!==r.StringUtil.lineBreak;)this.index++;return r.StringUtil.getSubstr(this.chars,e,this.index-e)}readWhitespaceOrNull(){const e=this.index;for(;!this.isEndOfText();){const e=this.chars[this.index];if(e===r.StringUtil.lineBreak)break;if(!o.default.isWhitespace(e))break;this.index++}return this.index===e?null:r.StringUtil.getSubstr(this.chars,e,this.index-e)}readString(){for(this.sb.clear();;){if(this.isEndOfText())throw new l.default(this,"String not closed");const e=this.chars[this.index];if(e===r.StringUtil.lineBreak)throw new l.default(this,"String not closed in starting line");if(e===r.StringUtil.doubleQuote)if(this.index++,this.tryReadChar(r.StringUtil.doubleQuote))this.sb.appendCodePoint(r.StringUtil.doubleQuote);else{if(!this.tryReadChar(r.StringUtil.slash))break;if(!this.tryReadChar(r.StringUtil.doubleQuote))throw new l.default(this,"String expected after linebreak slash");this.sb.appendCodePoint(r.StringUtil.lineBreak)}else this.sb.appendCodePoint(e),this.index++}return this.sb.toString()}readValue(){const e=this.index;for(;!this.isEndOfText();){const e=this.chars[this.index];if(o.default.isWhitespace(e)||e===r.StringUtil.hash)break;if(e===r.StringUtil.doubleQuote)throw new l.default(this,"String starting in value");this.index++}if(this.index===e)throw new l.default(this,"Invalid value");return r.StringUtil.getSubstr(this.chars,e,this.index-e)}}},495:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e,t){super(`${t} ${e.getLineInfoString()}`),Error.captureStackTrace&&Error.captureStackTrace(this,n);const i=e.getLineInfo();this.index=i[0],this.lineIndex=i[1],this.linePosition=i[2],this.text=e.getText()}}t.default=n},907:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(894),s=i(n(246)),o=i(n(36));class l{static containsSpecialChars(e){const t=r.StringUtil.stringToCodePoints(e);for(const e of t)if(e===r.StringUtil.lineBreak||o.default.isWhitespace(e)||e===r.StringUtil.doubleQuote||e===r.StringUtil.hash)return!0;return!1}static serializeLine(e,t){null!==t.getWhitespaces()&&t.getWhitespaces().length>0?l.serializeValuesWithWhitespace(e,t):l.serializeValuesWithoutWhitespace(e,t),null!==t.getComment()&&(e.appendCodePoint(r.StringUtil.hash),e.appendString(t.getComment()))}static serializeDocument(e){const t=new s.default;let n=!0;for(const i of e.getLines())n?n=!1:t.appendCodePoint(r.StringUtil.lineBreak),l.serializeLine(t,i);return t.toString()}static serializeValue(e,t){if(null===t)e.appendString("-");else if(""===t)e.appendString('""');else if("-"===t)e.appendString('"-"');else if(l.containsSpecialChars(t)){e.appendCodePoint(r.StringUtil.doubleQuote);const n=r.StringUtil.stringToCodePoints(t);for(const t of n)t===r.StringUtil.lineBreak?e.appendString('"/"'):t===r.StringUtil.doubleQuote?e.appendString('""'):e.appendCodePoint(t);e.appendCodePoint(r.StringUtil.doubleQuote)}else e.appendString(t)}static serializeWhitespace(e,t,n){null!=t&&t.length>0?e.appendString(t):n&&e.appendString(" ")}static serializeValuesWithWhitespace(e,t){const n=t.getValues(),i=t.getWhitespaces(),r=t.getComment();if(null!==n){for(let t=0;t<n.length;t++){let r=null;t<i.length&&(r=i[t]),0===t?l.serializeWhitespace(e,r,!1):l.serializeWhitespace(e,r,!0),l.serializeValue(e,n[t])}if(i.length>=n.length+1){const t=i[n.length];l.serializeWhitespace(e,t,!1)}else null!=r&&n.length>0&&e.appendString(" ")}else{const t=i[0];l.serializeWhitespace(e,t,!1)}}static serializeValuesWithoutWhitespace(e,t){const n=t.getValues(),i=t.getComment();if(null===n)return;let r=!1;for(const t of n)r?e.appendString(" "):r=!0,l.serializeValue(e,t);null!=i&&n.length>0&&e.appendString(" ")}}t.default=l},436:()=>{}},t={},function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}(590);var e,t}));